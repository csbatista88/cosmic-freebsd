--- data/start-cosmic.orig
+++ data/start-cosmic
@@ -4,26 +4,6 @@

 set -e

-# From: https://people.debian.org/~mpitt/systemd.conf-2016-graphical-session.pdf
-
-if command -v systemctl >/dev/null; then
-    # robustness: if the previous graphical session left some failed units,
-    # reset them so that they don't break this startup
-    for unit in $(systemctl --user --no-legend --state=failed --plain list-units | cut -f1 -d' '); do
-        partof="$(systemctl --user show -p PartOf --value "$unit")"
-        for target in cosmic-session.target graphical-session.target; do
-            if [ "$partof" = "$target" ]; then
-                systemctl --user reset-failed "$unit"
-                break
-            fi
-        done
-    done
-fi
-
 # use the user's preferred shell to acquire environment variables
 # see: https://github.com/pop-os/cosmic-session/issues/23
 if [ -n "${SHELL}" ]; then
@@ -41,11 +21,6 @@
 export QT_ENABLE_HIGHDPI_SCALING=1
 export DCONF_PROFILE=cosmic

-if command -v systemctl >/dev/null; then
-    # set environment variables for new units started by user service manager
-    systemctl --user import-environment XDG_SESSION_TYPE XDG_CURRENT_DESKTOP DCONF_PROFILE
-fi
-
 # Start gnome keyring components if the daemon is active
 # -> check if /run/user/$UID/keyring exists
 if [ -d "/run/user/$(id -u)/keyring" ]; then
@@ -62,7 +37,7 @@

 # Run cosmic-session
 if [[ -z "${DBUS_SESSION_BUS_ADDRESS}" ]]; then
-    exec /usr/bin/dbus-run-session -- /usr/bin/cosmic-session
+    exec /usr/local/bin/dbus-run-session -- /usr/local/bin/cosmic-session
 else
-    exec /usr/bin/cosmic-session
+    exec /usr/local/bin/cosmic-session
 fi
